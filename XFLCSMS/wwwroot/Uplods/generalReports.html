<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>XFL CSMS | General Reports</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="../../plugins/fontawesome-free/css/all.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="../../dist/css/adminlte.min.css">
</head>
<body class="hold-transition sidebar-mini">
<!-- Site wrapper -->
<div class="wrapper">
  <!-- Navbar -->
  <nav class="main-header navbar navbar-expand navbar-white navbar-light">
    <!-- Left navbar links -->
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
      </li>
      <li class="nav-item d-none d-sm-inline-block">
        <a href="../../index3.html" class="nav-link">Home</a>
      </li>
      <li class="nav-item d-none d-sm-inline-block">
        <a href="#" class="nav-link">Contact</a>
      </li>
    </ul>

    <!-- Right navbar links -->
    <ul class="navbar-nav ml-auto">
      <!-- Navbar Search -->
      <li class="nav-item">
        <a class="nav-link" data-widget="navbar-search" href="#" role="button">
          <i class="fas fa-search"></i>
        </a>
        <div class="navbar-search-block">
          <form class="form-inline">
            <div class="input-group input-group-sm">
              <input class="form-control form-control-navbar" type="search" placeholder="Search" aria-label="Search">
              <div class="input-group-append">
                <button class="btn btn-navbar" type="submit">
                  <i class="fas fa-search"></i>
                </button>
                <button class="btn btn-navbar" type="button" data-widget="navbar-search">
                  <i class="fas fa-times"></i>
                </button>
              </div>
            </div>
          </form>
        </div>
      </li>

      <li class="nav-item">
        <a class="nav-link" data-widget="fullscreen" href="#" role="button">
          <i class="fas fa-expand-arrows-alt"></i>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-widget="control-sidebar" data-slide="true" href="#" role="button">
          <i class="fas fa-th-large"></i>
        </a>
      </li>
    </ul>
  </nav>
  <!-- /.navbar -->

  <!-- Main Sidebar Container -->
  <aside class="main-sidebar sidebar-dark-primary elevation-4">
    <!-- Brand Logo -->
    <a href="../../index.html" class="brand-link">
      <img src="../../dist/img/XFLlogo.png" alt="XFL Logo" class="brand-image img-circle elevation-3" style="opacity: .8">
      <span class="brand-text font-weight-light">XFL CSMS</span>
    </a>

    <!-- Sidebar -->
    <div class="sidebar">
      <!-- Sidebar user (optional) -->
      <div class="user-panel mt-3 pb-3 mb-3 d-flex">
        <div class="image">
          <img src="../../dist/img/md.png" class="img-circle elevation-2" alt="User Image">
        </div>
        <div class="info">
          <a href="#" class="d-block">M A MALEQUE KIBRIA</a>
        </div>
      </div>

      <!-- SidebarSearch Form -->
      <div class="form-inline">
        <div class="input-group" data-widget="sidebar-search">
          <input class="form-control form-control-sidebar" type="search" placeholder="Search" aria-label="Search">
          <div class="input-group-append">
            <button class="btn btn-sidebar">
              <i class="fas fa-search fa-fw"></i>
            </button>
          </div>
        </div>
      </div>

      <!-- Sidebar Menu -->
      <nav class="mt-2">
        <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
          <!-- Add icons to the links using the .nav-icon class
               with font-awesome or any other icon font library -->
          <li class="nav-item">
            <a href="#" class="nav-link">
              <i class="nav-icon fas fa-tachometer-alt"></i>
              <p>
                Dashboard
                <i class="right fas fa-angle-left"></i>
              </p>
            </a>

          <li class="nav-item">
            <a href="#" class="nav-link">
              <i class="nav-icon fas fa-edit"></i>
              <p>
                Forms
                <i class="fas fa-angle-left right"></i>
              </p>
            </a>

          <li class="nav-item menu-open">
            <a href="#" class="nav-link active">
              <i class="nav-icon fas fa-book"></i>
              <p>
                Pages
                <i class="fas fa-angle-left right"></i>
              </p>
            </a>
            <ul class="nav nav-treeview">
              <li class="nav-item">
                <a href="../examples/profile.html" class="nav-link">
                  <i class="far fa-circle nav-icon"></i>
                  <p>Profile</p>
                </a>
              </li>

              <li class="nav-item">
                <a href="../examples/projects.html" class="nav-link active">
                  <i class="far fa-circle nav-icon"></i>
                  <p>Tickets</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="../examples/project-add.html" class="nav-link">
                  <i class="far fa-circle nav-icon"></i>
                  <p>Add Tickets</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="../examples/project-edit.html" class="nav-link">
                  <i class="far fa-circle nav-icon"></i>
                  <p>Edit Tickets</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="../examples/project-detail.html" class="nav-link">
                  <i class="far fa-circle nav-icon"></i>
                  <p>Ticket Detail</p>
                </a>
              </li>

            </ul>
          </li>

        </ul>
      </nav>
      <!-- /.sidebar-menu -->
    </div>
    <!-- /.sidebar -->
  </aside>

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1>General Reports</h1>
          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="#">Home</a></li>
              <li class="breadcrumb-item active">General Reports</li>
            </ol>
          </div>
        </div>
      </div><!-- /.container-fluid -->
    </section>

    <!-- Main content -->
    <section class="content">

      <!-- Default box -->
      <div class="card">
        <div class="card-header">
          <h5 class="text-center"><b>Generate Your Report</br></br></h5>
          <div class="container-fluid">
            <div class="row">
              <div class="col-md-10 offset-md-1">
                <form id="advancedSearchForm">

                  <div class="row">

                    <div class="col-4">
                  <div class="form-group">
                    <label for="bHouse">Brokerage House</label>
                    <select class="form-control" id="bHouse">
                      <option value="">Select Brokerage House</option>
                      <option value="ALL">All</option>
                      <option value="AIL">Apex Investments Ltd.</option>
                      <option value="BASL">Bank Asia Securities Ltd.</option>
                      <option value="EBLSL">EBL Securities Ltd.</option>
                      <option value="GDSL">Green Delta Securities Ltd.</option>
                      <option value="IBSL">Islami Bank Securities Ltd.</option>
                      <option value="MHL">Monarch Holdings Ltd.</option>
                      <option value="NLISL">NLI Securities Ltd.</option>
                      <option value="OSL">One Securities Ltd.</option>
                      <option value="SJIBSL">Shahjalal Islami Bank Securities Ltd.</option>
                      <option value="UCBSBL">UCB Stock Brokerage Limited.</option>
                    </select>
                  </div>
                </div>

                <div class="col-4">
                  <div class="form-group">
                    <label for="Priority">Priority</label>
                    <select class="form-control" id="Priority">
                      <option value="">Select Priority</option>
                      <option value="ALL">All</option>
                      <option value="Low">Low</option>
                      <option value="Medium">Medium</option>
                      <option value="High">High</option>
                    </select>
                  </div>
                </div>

                <div class="col-4">
                  <div class="form-group">
                    <label for="assigningStatus">Assigning Status</label>
                    <select class="form-control" id="assigningStatus">
                      <option value="">Select Assigning Status</option>
                      <option value="ALL">All</option>
                      <option value="Assigned">Assigned</option>
                      <option value="Unassigned">Unassigned</option>
                    </select>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-4">
                  <div class="form-group">
                    <label for="Status">Status</label>
                    <select class="form-control" id="Status">
                      <option value="">Select Status</option>
                      <option value="ALL">All</option>
                      <option value="Done">Done</option>
                      <option value="InQueue">In Queue</option>
                      <option value="Closed">Closed</option>
                    </select>
                  </div>
                </div>

                <div class="col-4">
                    <div class="form-group">
                      <label for="startDate">From Date</label>
                      <input type="date" class="form-control" id="startDate">
                    </div>
                </div>

                <div class="col-4">
                    <div class="form-group">
                      <label for="endDate">To Date</label>
                      <input type="date" class="form-control" id="endDate">
                    </div>
                </div>
                  </div>

                <div class=" row d-flex justify-content-center align-content-center">
                  <button type="button" class="btn btn-outline-primary" onclick="performSearch()">
                    <i class="fas fa-search"></i> Search
                  </button>
              </div>
            </form>


            </div>

          </div>

          <div  class="card-tools text-right">
            <button type="button" class="btn btn-tool" data-card-widget="collapse" title="Collapse">
              <i class="fas fa-minus"></i>
            </button>
            <button type="button" class="btn btn-tool" data-card-widget="remove" title="Remove">
              <i class="fas fa-times"></i>
            </button>
          </div>
        </div>
        </div>
        <div class="card-body p-0">
          <div id="searchResults">
          <table class="table table-striped projects">
              <thead>
                <tr>
                    <th style="width:10%">
                        Ticket #
                    </th>
                    <th style="width: 10%" >
                        Ticket Date
                    </th>
                    <th style="width: 20%">
                        Brokerage House Name
                    </th>
                    <th style="width: 15%" >
                      Elapsed Time
                    </th>
                    <th style="width: 15%">
                        Priority
                    </th>
                    <th style="width: 15%">
                        Assigning Status
                    </th>
                    <th style="width: 15%" >
                        Status
                    </th>
                </tr>
              </thead>
              <tbody>
                  <tr>
                      <td>
                          EBLSL000451
                      </td>
                      <td>
                          2/2/24 (2:03 PM)
                      </td>
                      <td>
                        EBL Securities Ltd.
                      </td>
                      <td>
                      1.5 Hrs
                      </td>
                      <td class="project-state">
                          <span class="badge badge-success"> High </span>
                      </td>
                      <td class="project-state">
                          <span class="badge badge-danger"> Assigned </span>
                      </td>
                      <td class="project-state">
                          <span class="badge badge-success"> Closed </span>
                      </td>
                  </tr>
              </tbody>
          </table>
        </div>
        <!-- /.card-body -->
        <div class="row d-flex justify-content-center align-content-center">
          <!-- Add Print Button -->
          <button type="button" class="btn btn-outline-secondary ml-2" onclick="printResults()">
            <i class="fas fa-print"></i> Print Results
          </button>
        </div>
      </div>
      </div>
      <!-- /.card -->

    </section>
    <!-- /.content -->
  </div>
  <!-- /.content-wrapper -->

  <footer class="main-footer">
    <div class="float-right d-none d-sm-block">
      <b>Version</b> 1.0.0
    </div>
    <strong>Copyright &copy; 2023 <a href="https://xpertfintech.com">XFL</a>.</strong> All rights reserved.
  </footer>

  <!-- Control Sidebar -->
  <aside class="control-sidebar control-sidebar-dark">
    <!-- Control sidebar content goes here -->
  </aside>
  <!-- /.control-sidebar -->
</div>
<!-- ./wrapper -->

<!-- jQuery -->
<script src="../../plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="../../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- AdminLTE App -->
<script src="../../dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="../../dist/js/demo.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@chenfengyuan/datepicker"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<script>
  function performSearch() {
    var brokerageHouse = $('#bHouse').val();
    var priority = $('#Priority').val();
    var assigningStatus = $('#assigningStatus').val();
    var status = $('#Status').val();
    var startDate = $('#startDate').val();
    var endDate = $('#endDate').val();

    // Example data - replace with your actual data fetching logic
    const reportData = [
      { id: 'EBLSL000451', date: '12/12/24 (2:03 PM)', brokerageHouseName: 'EBL Securities Ltd.', title: "Can't execute buy & sell order from Mobile Trading facility.", priority: 'High', assigningStatus: 'Assigned', status: 'Closed' },
      // Add more data as needed
    ];

    // Filter the report data based on search parameters
    const filteredData = reportData.filter(item => {
      return (
        (brokerageHouse === 'ALL' || item.brokerageHouseName === brokerageHouse) &&
        (priority === 'ALL' || item.priority === priority) &&
        (assigningStatus === 'ALL' || item.assigningStatus === assigningStatus) &&
        (status === 'ALL' || item.status === status) &&
        (!startDate || new Date(item.date) >= new Date(startDate)) &&
        (!endDate || new Date(item.date) <= new Date(endDate))
      );
    });

    // Display the total number of rows on top of the table
    const totalRows = document.createElement('p');
    totalRows.innerText = `Total Rows: ${filteredData.length}`;
    document.getElementById('searchResults').innerHTML = '';
    document.getElementById('searchResults').appendChild(totalRows);

    // Create the table for displaying search results
    const table = document.createElement('table');
    table.className = 'table table-striped projects';
    const thead = table.createTHead();
    const tbody = table.createTBody();

    // Create table headers
    const headers = ['#', 'Ticket Date', 'Brokerage House Name', 'Ticket Title & Details', 'Priority', 'Assigning Status', 'Status'];
    const headerRow = thead.insertRow();
    headers.forEach(headerText => {
      const th = document.createElement('th');
      th.appendChild(document.createTextNode(headerText));
      headerRow.appendChild(th);
    });

    // Populate table rows with filtered data
    filteredData.forEach((item, index) => {
      const row = tbody.insertRow();
      const values = [index + 1, item.date, item.brokerageHouseName, item.title, item.priority, item.assigningStatus, item.status];
      values.forEach(value => {
        const cell = row.insertCell();
        cell.appendChild(document.createTextNode(value));
      });
    });

    // Append the table to the search results div
    document.getElementById('searchResults').appendChild(table);
  }
</script>
<script>
// Function to print search results
    function printResults() {
      // Open a new window and write the search results HTML
      const printWindow = window.open('', '_blank');
      printWindow.document.write('<html><head><title>Search Results</title></head><body>');
      printWindow.document.write('<h1>XFL Employee Reports - Search Results</h1>');
      printWindow.document.write(document.getElementById('searchResults').innerHTML);
      printWindow.document.write('</body></html>');
      printWindow.document.close();

      // Print the new window
      printWindow.print();
    }
  </script>

  <script>
     // ... (existing script content) ...

     // Function to print search results in two rows
     function printResults() {
       // Open a new window and write the search results HTML
       const printWindow = window.open('', '_blank');
       printWindow.document.write('<html><head><title>General Search Results</title>');
       printWindow.document.write('<style>');
       printWindow.document.write('.section { margin-bottom: 20px; }');
       printWindow.document.write('.row { display: flex; justify-content: space-between; }');
       printWindow.document.write('</style></head><body>');

       // Section 1: Employee ID and Brokerage House Name
       printWindow.document.write('<div class="section row">');
       printWindow.document.write('<div>');
       printWindow.document.write('<h4>Section 1</h4>');
       printWindow.document.write('Employee ID: ');
       printWindow.document.write('<br/>Brokerage House Name: ');
       printWindow.document.write('<br/>Employee ID: ');
       printWindow.document.write('<br/>Brokerage House Name: ');
       printWindow.document.write('</div>');

       // Section 2: Total Open Report number, Closed Report number, In queue Report number, and Brokerage House Number
       printWindow.document.write('<div>');
       printWindow.document.write('<h4>Section 2</h4>');
       printWindow.document.write('Total Open Reports: ');
       printWindow.document.write('<br/>Total Closed Reports: ');
       printWindow.document.write('<br/>Total In Queue Reports: ');
       printWindow.document.write('<br/>Total Brokerage House Number: ');
       printWindow.document.write('</div>');
       printWindow.document.write('</div>');

       // Section 3: Search Results
       printWindow.document.write('<div class="section">');
       printWindow.document.write('<h4>Section 3: Search Results</h4>');
       printWindow.document.write(document.getElementById('searchResults').innerHTML);
       printWindow.document.write('</div>');

       printWindow.document.write('</body></html>');
       printWindow.document.close();

       // Print the new window
       printWindow.print();
     }
   </script>
</body>
</html>
