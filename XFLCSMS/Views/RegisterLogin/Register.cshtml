
@model XFLCSMS.Models.Register.RegisterViewModel;

@{
    // ViewData["Title"] = "Register";
    Layout = null;
    
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>XFL CSMS| Registration Page</title>

    <!-- Google Font: Source Sans Pro -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="~/css/all.min.css">
    <!-- icheck bootstrap -->
    <link rel="stylesheet" href="C:\Users\Lenovo\Desktop\CMCS\Login-Registation-ForgotPassword-Email\XFLCSMS\wwwroot\lib\bootstrap\dist\css\icheck-bootstrap.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="~/css/adminlte.min.css">
    <style>
        .form-toggle {
            display: none;
        }

            .form-toggle.active {
                display: inherit;
            }
    </style>
</head>


<body class="hold-transition register-page">

    <div class="register-box">
        <!-- Register Logo -->
        <div class="card card-outline card-primary">
            <div class="card-header text-center">
                <a href="../../index.html" class="h1"><b>XFL</b>CSMS</a>
                <br>
                <p class="register-box-msg">Register a New Account</p>



            </div>

            <div class="card-body">
                <form asp-controller="RegisterLogin" asp-action="Register" method="post" id="form1" class="form-toggle active">
                    <div class="card">
                        <div class="card-body register-card-body">
                            <p class="register-box-msg"><b>Personal Information</b></p>

                            <div  class="input-group mb-3">
                                <input asp-for="@Model.userRegisterRequest.FullName" id="fullname" name="userRegisterRequest.FullName" type="text" class="form-control" placeholder="Full Name">
                                <div  class="input-group-append">
                                    <div  class="input-group-text">
                                        <span   class="fas fa-user"></span>
                                    </div>
                                </div>
                                
                            </div>
                            <span asp-validation-for="userRegisterRequest.FullName" class="text-danger"></span>

                            <div class="input-group mb-3">
                                <input asp-for="userRegisterRequest.Email" type="email" id="email" name="userRegisterRequest.Email" class="form-control" placeholder="Email">
                                <div class="input-group-append">
                                    <div class="input-group-text">
                                        <span   class="fas fa-envelope"></span>
                                    </div>
                                </div>
                                
                            </div>
                            <span asp-validation-for="userRegisterRequest.Email" class="text-danger"></span>

                            <div class="input-group mb-3">
                                <input asp-for="userRegisterRequest.PhonNumber" id="PhonNumber" name="userRegisterRequest.PhonNumber" type="text" class="form-control" placeholder="Phone Number">
                                <div class="input-group-append">
                                    <div class="input-group-text">
                                        <span  class="fa fa-mobile"></span>
                                    </div>
                                </div>
                                
                            </div>
                            <span asp-validation-for="userRegisterRequest.PhonNumber" class="text-danger"></span>


                        </div>
                    </div>

                    <div class="card">
                        <div class="card-body register-card-body">
                            <p class="login-box-msg"><b>Company Information</b></p>


                            <div class="input-group mb-3">

                                <select asp-for="userRegisterRequest.BrokerageHouseName" id="brokerageCodes"  name="userRegisterRequest.BrokerageHouseName" class="form-control">

                                        <option value="XFL">Select Your Organization</option>
                                        @foreach (var item in Model.Brokerages)
                                        {
                                            <option value="@item.BrokerageId" data-acronym="@item.BrokerageHouseAcronym">@item.BrokerageHouseName</option>
                                        }

                                </select>

                                <div class="input-group-append">
                                    <div class="input-group-text">
                                        <span  class="fa fa-home"></span>
                                    </div>
                                </div>
                            </div>
                            <span asp-validation-for="userRegisterRequest.BrokerageHouseName" class="text-danger"></span>


                            <div class="input-group mb-3">

                                    <input id="BrokerageHouseAcronym" name="userRegisterRequest.BrokerageHouseAcronym" type="text"
                                           class="form-control" placeholder=" Acronym" readonly>
                                

                                <div class="input-group-append">
                                    <div class="input-group-text">
                                        @if(@Model.Acronyme !=null)
                                        {
                                            <span id="Acronym"> @Model.Acronyme </span>
                                        }
                                        else
                                        {
                                            <span id="Acronym"> </span>
                                        }
                                        
                                    </div>
                                </div>

                      
                            </div>

                            @if(Model.Branchhs != null)
                            {

                                <div class="input-group mb-3">
                                    <select asp-for="userRegisterRequest.Branch" id="Branch" name="userRegisterRequest.Branch" class="form-control">
                                        <option value="">Select Your Branch</option>
                                        @foreach (var item in Model.Branchhs)
                                        {
                                            <option value="@item.BranchId">@item.BranchName</option>
                                        }

                                    </select>
                                    <div class="input-group-append">
                                        <div class="input-group-text">
                                            <span class="fa fa-building"></span>
                                        </div>
                                    </div>
                                </div>
                                <span asp-validation-for="userRegisterRequest.Branch" class="text-danger"></span>

                            }
                            else
                            {
                                <div class="input-group mb-3">
                                    <select asp-for="userRegisterRequest.Branch" id="Branch" name="userRegisterRequest.Branch" class="form-control">
                                        <option value="NULL">Select Your Branch</option>
                                    </select>
                                    <div class="input-group-append">
                                        <div class="input-group-text">
                                            <span class="fa fa-building"></span>
                                        </div>
                                    </div>
                                </div>
                                <span asp-validation-for="userRegisterRequest.Branch" class="text-danger"></span>

                                
                            }





                            @if(Model.Branchhs !=null)
                            {
                                <div class="input-group mb-3">
                                    <input asp-for="userRegisterRequest.EmployeeId" id="EmployeeId" name="userRegisterRequest.EmployeeId" type="text" class="form-control" placeholder="Employee ID">
                                    <div class="input-group-append">
                                        <div class="input-group-text">
                                            <span class="fas fa-id-card"></span>
                                        </div>
                                    </div>
                                </div>
                            }
                            else
                            {
                                <div class="input-group mb-3">
                                    <input asp-for="userRegisterRequest.EmployeeId" id="EmployeeId" name="userRegisterRequest.EmployeeId" type="text" class="form-control" placeholder="Employee ID">
                                    <div class="input-group-append">
                                        <div class="input-group-text">
                                            <span class="fas fa-id-card"></span>
                                        </div>
                                    </div>
                                </div>
                                
                            }
 
                            <span asp-validation-for="userRegisterRequest.EmployeeId" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-body register-card-body">
                            <p class="login-box-msg"><b>Account Credentials</b></p>

                            <div class="input-group mb-3">
                                <input asp-for="userRegisterRequest.UserName" type="text" id="Username" name="userRegisterRequest.UserName" class="form-control" placeholder="User Name">
                                <div class="input-group-append">
                                    <div class="input-group-text">
                                        <span class="fas fa-user"></span>
                                    </div>
                                </div>
                                
                            </div>
                            <span asp-validation-for="userRegisterRequest.UserName" class="text-danger"></span>
                            


                            <div class="input-group mb-3">
                                <input asp-for="userRegisterRequest.Password" type="password" class="form-control" id="password" name="userRegisterRequest.Password" aria-describedby="passwordToggle" placeholder="Password">
                                <button class="btn btn-outline-secondary" type="button" id="passwordToggle" onclick="togglePassword()">Show</button>
                            </div>
                            <span asp-validation-for="userRegisterRequest.Password" class="text-danger"></span>
                            <div class="input-group mb-3">
                                <input  type="password" class="form-control" id="Confirmpassword" name="userRegisterRequest.ConfirmPassword" aria-describedby="ConfirmpasswordToggle" placeholder="Confirm Password">
                                <button class="btn btn-outline-secondary" type="button" id="ConfirmpasswordToggle" onclick="ConfirmtogglePassword()">Show</button>
                            </div>
                            <span id="passwordMismatchError" class="text-danger" style="display: none;">Passwords do not match.</span>


                        </div>
                    </div>
                    <div class="card">
                        <div class="card-body register-card-body">
                            <div class="">
                                <div class="icheck-primary">
                                    <input asp-for="userRegisterRequest.Terms" id="Terms" type="checkbox" name="userRegisterRequest.Terms">
                                    <label for="agreeTerms">
                                        I agree to the <a href="#">terms & conditions</a>
                                    </label>
                                </div>
                                <span asp-validation-for="userRegisterRequest.Terms" class="text-danger"></span>
                            </div>
                            <!-- /.col -->
                            <div class="mb-3">
                                <button type="submit" class="btn btn-outline-primary btn-block">Register</button>
                            </div>
                        </div>
                    </div>
                </form>

              

                <div align="center">
                    <a asp-action="Login" class="text-center">I already have a membership</a>
                </div>
                <!-- /.col -->

            </div>

        </div>
    </div>
    



    


    <!-- jQuery -->
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/js/bootstrap.bundle.min.js"></script>
    <!-- AdminLTE App -->
    <script src="~/js/adminlte.min.js"></script>
    <!-- Password -->
    <script>
        function togglePassword() {
            const passwordInput = document.getElementById('password');
            const passwordToggle = document.getElementById('passwordToggle');

            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                passwordToggle.textContent = 'Hide';
            } else {
                passwordInput.type = 'password';
                passwordToggle.textContent = 'Show';
            }
        }

        function togglePassword2() {
            const passwordInput = document.getElementById('password2');
            const passwordToggle = document.getElementById('passwordToggle2');

            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                passwordToggle.textContent = 'Hide';
            } else {
                passwordInput.type = 'password';
                passwordToggle.textContent = 'Show';
            }
        }
    </script>
    <!-- Confirm Password -->
    <script>
        function ConfirmtogglePassword() {
            const passwordInput = document.getElementById('Confirmpassword');
            const passwordToggle = document.getElementById('ConfirmpasswordToggle');

            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                passwordToggle.textContent = 'Hide';
            } else {
                passwordInput.type = 'password';
                passwordToggle.textContent = 'Show';
            }
        }

        function ConfirmtogglePassword2() {
            const passwordInput = document.getElementById('Confirmpassword2');
            const passwordToggle = document.getElementById('ConfirmpasswordToggle2');

            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                passwordToggle.textContent = 'Hide';
            } else {
                passwordInput.type = 'password';
                passwordToggle.textContent = 'Show';
            }
        }
    </script>

    <!--Form Toogle-->
    <script>
        function toggleForm(form1) {
            // Hide all forms
            document.querySelectorAll('.form-toggle').forEach(form => form.classList.remove('active'));

            // Show the selected form
            document.getElementById(form1).classList.add('active');
        }
    </script>

    <script>
        function toggleForm(formId) {
            // Hide all forms
            document.querySelectorAll('.form-toggle').forEach(form => form.classList.remove('active'));

            // Show the selected form
            document.getElementById(formId).classList.add('active');


        }
    </script>

    <script>
        // Get references to the select element and the Acronym span
        var selectElement = document.getElementById('brokerageCodes');
        var acronymSpan = document.getElementById('Acronym');
        var acc = document.getElementById('BrokerageHouseAcronym');

        // Add an event listener to the select element
        selectElement.addEventListener('change', function () {          
            // Get the selected option
            var selectedOption = selectElement.options[selectElement.selectedIndex];

            // Update the Acronym span with the data-acronym attribute of the selected option
            acronymSpan.textContent = selectedOption.getAttribute('data-acronym');
            
            
            
        });
    </script>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>


    <script>
        $(document).ready(function () {
            // Handle brokerage dropdown change event
            $("#brokerageCodes").change(function () {
                var selectedBrokerageId = $(this).val();
                var branchDropdown = $("#Branch");

                // Clear existing options
                branchDropdown.empty();

                // Add the default "Select Your Branch" option
                branchDropdown.append('<option value="NULL">Select Your Branch</option>');

                // Fetch branches based on the selected brokerage using AJAX
                $.ajax({
                    url: '@Url.Action("GetBranches", "RegisterLogin")',
                    type: 'GET',
                    data: { brokerageId: selectedBrokerageId },
                    dataType: 'json',
                    success: function (branches) {
                        // Log fetched branches to the console
                        console.log('Fetched branches:', branches);

                        // Populate the branch dropdown with fetched branches
                        $.each(branches, function (index, branch) {
                            branchDropdown.append('<option value="' + branch.branchId + '">' + branch.branchName + '</option>');
                        });

                        // Show the branch dropdown
                        branchDropdown.show();
                    },
                    error: function (xhr, status, error) {
                        console.error('Failed to fetch branches. Status:', status, 'Error:', error);
                    }
                });
            });
        });
    </script>


    <script>
        $(document).ready(function () {
            $('#Confirmpassword').on('keyup', function () {
                var password = $('#password').val();
                var confirmPassword = $(this).val();
                if (password === confirmPassword) {
                    $('#passwordMismatchError').hide();
                } else {
                    $('#passwordMismatchError').show();
                }
            });
        });
    </script>





 
    
</body>
</html>


